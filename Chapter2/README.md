# Chapter 2: Ethernet Networking and Encapsulation

## Ethernet in Review
* Collision domain -- any network segment in which a collision will occur if two hosts transmit at the same time
* Broadcast domain -- a group of devices on a network segment capable of receiving the same broadcasts

### CSMA/CD
* Carrier Sense Multiple Access with Collision Detection
* Used in half-duplex Ethernet to prevent collisions
1. Before a host transmits, they listen to see if medium is clear
2. If another host tries to transmit at the same time, first host sends a jam signal
3. All hosts start a random backoff timer
4. All hosts stop transmitting until timer expires
5. Hosts have equal priority after timer expires
  
### Half-duplex/Full-duplex
* Hubs must operate in half-duplex due to how they function (fowarding packets to all attached hosts)
* Full duplex uses two pairs rather than one -- send and receive sent on different pairs
* FD can be used with any device but a hub

## Ethernet at Layer 2
### Addressing
* MAC Address Structure
I/G Bit - 1 bit: Individual or Group -- if 0, device is an individual host, if 1 the address is for broad/multicasts
G/L Bit - 1 bit: Global or Local -- if 0, it's part of a block assigned by the IEEE, if it's 1 it's a locally-assigned address
OUI - 22 bits: Organizationally Unique Identifier assigned by the IEEE to a manufacturer
Vendor-Assigned Identifier - 24 bits: specific ID for this device/host

### Framing
* Framing information placed around layer 3 packet before being converted to bits for transmission
  * Preamble - 7 bytes: repeating 101010 pattern to establish a 5MHz clock for synchronization
  * SFD - 1 byte: Start Frame Delimiter -- 10101011, first 3 bits finalize sychronization, 11 signals start of frame
  * Destination Address/Source Address - 6 bytes each: broadcast/multicasts will only be in Destination Address field
  * Type - 2 bytes: Identifies layer 3 protocol for proper handling of frame by switch/destination
  * Data - up to 1500 bytes: the data, brain genius
  * FCS - 4 bytes: Frame Check Sequence -- a cyclic redundancy check generated by sender, recipient regenerates CRC and signals error if it doesn't match


## Ethernet at Layer 1
### Specifications
* Defined by EIA/TIA (Electronics Industry Association/Telecommunications Industry Association)
* Uses registered jack (RJ) connectior and unshielded twisted pair wires connected to an 8-pin modular jack
* CAT rating based on attenuation of signal

### Standards
* 802.3 - 10Base-T
* 802.3u
  * 100Base-T -- often referred to by Cisco as Fast Ethernet
  * 100Base-FX -- multi-mode fiber
* 802.3z - 1000Base-CX -- copper twisted pair terminated by a balanced coaxial jack and special serial connector -- 25m max, usually used in datacenter applications
* 302.3ab - 1000Base-T, gigabit ethernet
* 302.3z
  * 1000Base-SX -- multi-mode fiber
  * 1000Base-LX -- single-mode fiber, very long runs
* 1000Base-ZX -- Cisco standard for long-run single-mode fiber
* 802.3an -- 10gBase-T - new 10gig hotness

### Cable Types
* Straight-through
  * Connects host to switch, switch to router
  * Pinout: Fast Ethernet connects 1 to 1, 2 to 2, 3 to 3, and 6 to 6

* Crossover
  * Connects like to like -- host to host, switch to switch, router to router, host to router
  * Pinout: FE connects 1 to 3, 2 to 6, 3 to 1, and 6 to 2
  
* Gigabit
  * Need double the wires for 10x the fun
  * I think we can figure out pinout on straight-through on our own
  * Crossover pinout: adds 4&5 connecting to 7&8 and vice versa
  
* Rollover
  * Used for connection an RS-232 jack to a console port
  * Pinout: 1 to 8, 2 to 7... &c
  
* Fiber-optic
  * 3 components
    * Core - 9 microns wide, acts as the waveguide
    * Cladding - 125 microns wide, pads core
    * Buffer - 250 microns wide, protects inner layers
  * Single-mode fiber only allows one wavelength -- lack of interference allows for longer runs
  * Multi-mode fiber allows multiple wavelengths
  
## Encapsulation
* The wrapping of data with headers as it goes down the stack -- data referred to as PDUs (protocol data units)
* Upper layer data passed to layer 4, where protocol header (TCP or UDP) is added to the data -- this is where the port number is set, and is referred to as the segment
* Layer 4 data passed to layer 3, which adds IP headers -- referred to as the packet
* Layer 3 data passed to layer 2, which frames it as above -- the frame
* Layer 2 passed to layer 1, which transmits as 1s and 0s
* Same process occurs at other side -- decapsulation
* CCNA mostly concerned with layers 1-4 -- you're just here to make the lights blink good

## Cisco Hierarchical Network Model
* Seperates network into 3 layers, each with separate responsibilities
* Logical layers, not necessarily physical -- device can incorporate multiple layers of this model, or only one

### Core Network
* Central area of the network, concerned with delivering large amounts of traffic as fast as possible
* Core failures can affect all users, so don't mess it up
* Core Don'ts:
  * Don't slow down traffic with processing -- don't filter, don't apply ACLs, don't do VLAN routing
  * Don't do direct workgroup access
  * Don't expand too much -- upgrade first
* Core Do's:
  * Design for speed, availability, and redundancy
  * Select routing protocols with a low convergence time -- if the network changes, you want it to reconverge rapidly
  
### Distribution Layer
* Workgroup layer
* Facilitates communication between access layer and core layer
* Provides routing, filtering, WAN connections, and determines what needs to hit the core
* Determines fastest way to service network requests
* Handles
  * routing
  * ACLS, filtering, queueing
  * Security/network policy
  * Redistribution between routing protocols
  * Inter-VLAN routing
  * determination of broadcast/multicast domains

### Access Layer
* "desktop" layer
* Controls user/workgroup access
* Handles
  * Continued use of access policies
  * Creation of collision domains
  * Workgroup connectivity to distribution layer
  * Device connectivity
  * Resiliance/security services
  * Other advanced technologies (like VoIP, f.ex)
